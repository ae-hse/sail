{% extends "exploration/base.html" %}

{% load i18n %}
{% load group_tags %}

{% block body %}

<div style="display:none">
    <form id="counterexample_form" method="post" action="">
            <input type="hidden" id="imp_pk" name="imp_pk" value=""/>
        <p>
            <label for="example_name">Name: </label>
            <input type="text" id="example_name" name="example_name" size="30" />
        </p>
        <p>
        {% for attr in attributes %}
            <input type="checkbox" class="attribute-input" name="{{ attr.pk }}" />{{ attr.name }}</br>
        {% endfor %}
        </p>
        <p>
            <input type="submit" value="Submit" />
        </p>
    </form>
</div>

<h1>Implications</h1>

<div class="implication-table">
<h2>Background Knowledge</h2>

{% if confirmed_implications or confirmed_existence_implications %}
	{% if confirmed_implications %}
		<table>
		<tr style="background-color: #99BBCC">
			<th>IF</th>
			<th>THEN</th>
			<th style="border: 0px none; background-color: #FFFFFF;"></th>
		</tr>
		{% for imp in confirmed_implications %}
			<tr style="background-color: {% cycle '#FFFFFF' '#99BBCC' as rowcolor %}">
			<td>
			<table>
			{% for attr in imp.premise.all %}
				{{ attr.name }}<br/>
			{% endfor %}
			</table>
			</td>
			<td>
			<table>
			{% for attr in imp.conclusion.all %}
				{{ attr.name }}<br/>
			{% endfor %}
			</table>
			</td>
			<td style="border: 0px none; background-color: #FFFFFF;">
				<a id="{{ imp.pk }}" class="unconfirm-imp" href="#">
				<img src="{{ STATIC_URL }}img/unconfirm.png" alt="Unconfirm"/></a>
			</td>
			</tr>
		{% endfor %}
		</table>
	{% endif %}
	
	{% if confirmed_existence_implications %}
		<table>
		<tr style="background-color: #99BBCC">
			<th>Can these attributes appear together?</th>
			<th style="border: 0px none; background-color: #FFFFFF;"></th>
		</tr>
		{% for imp in confirmed_existence_implications %}
			<tr style="background-color: {% cycle '#FFFFFF' '#99BBCC' as rowcolor %}">
			<td>
			<table style="border: 0px;">
			{% for attr in imp.premise %}
				{{ attr }}<br/>
			{% endfor %}
			</table>
			</td>
			<td style="border: 0px none; background-color: #FFFFFF;">
				<a id="{{ imp.pk }}" class="confirm-imp" href="#">
				<img src="{{ STATIC_URL }}img/confirm.png" alt="Confirm"/></a>
				<a id="{{ imp.pk }}" class="reject-imp" href="#counterexample_form">
				<img src="{{ STATIC_URL }}img/reject.png" alt="Reject"/></a>
			</td>
			</tr>
		{% endfor %}
		</table>
	{% endif %}
{% else %}
	There is no background knowledge.
{% endif %}

<h2>Open Implications</h2>

{% if open_implications or open_existence_implications %}
	{% if open_implications %}
		<table>
		<tr style="background-color: #99BBCC">
			<th>IF</th>
			<th>THEN</th>
			<th style="border: 0px none; background-color: #FFFFFF;"></th>
		</tr>
		{% for imp in open_implications %}
			<tr style="background-color: {% cycle '#FFFFFF' '#99BBCC' as rowcolor %}">
			<td>
			<table style="border: 0px;">
			{% for attr in imp.premise %}
				{{ attr }}<br/>
			{% endfor %}
			</table>
			</td>
			<td>
			<table>
			{% for attr in imp.conclusion %}
				{{ attr }}<br/>
			{% endfor %}
			</table>
			</td>
			<td style="border: 0px none; background-color: #FFFFFF;">
				<a id="{{ imp.pk }}" class="confirm-imp" href="#">
				<img src="{{ STATIC_URL }}img/confirm.png" alt="Confirm"/></a>
				<a id="{{ imp.pk }}" class="reject-imp" href="#counterexample_form">
				<img src="{{ STATIC_URL }}img/reject.png" alt="Reject"/></a>
			</td>
			</tr>
		{% endfor %}
		</table>
	{% endif %}
	
	{% if open_existence_implications %}
		<table>
		<tr style="background-color: #99BBCC">
			<th>Can these attributes appear together?</th>
			<th style="border: 0px none;  background-color: #FFFFFF;"></th>
		</tr>
		{% for imp in open_existence_implications %}
			<tr style="background-color: {% cycle '#FFFFFF' '#99BBCC' as rowcolor %}">
			<td>
			<table style="border: 0px;">
			{% for attr in imp.premise %}
				{{ attr }}<br/>
			{% endfor %}
			</table>
			</td>
			<td style="border: 0px none; background-color: #FFFFFF;">
				<a id="{{ imp.pk }}" class="confirm-imp" href="#">
				<img src="{{ STATIC_URL }}img/confirm.png" alt="Confirm"/></a>
				<a id="{{ imp.pk }}" class="reject-imp" href="#counterexample_form">
				<img src="{{ STATIC_URL }}img/reject.png" alt="Reject"/></a>
			</td>
			</tr>
		{% endfor %}
		</table>
	{% endif %}
{% else %}
	There are no open implications.
{% endif %}

</div>

{% endblock %}